(this["webpackJsonpgolf-gamblers-front-end"]=this["webpackJsonpgolf-gamblers-front-end"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(14),o=n.n(i),a=(n(90),n(61)),s=n(4),l=n(35),u=n(15),j=n(32),d=n.n(j),b=n(43),h=n(21),f=n(7),p=(n(56),n(66),n(113),n(70)),O=n(38),v=n(3),x=f.a.apps.length?f.a.app():f.a.initializeApp(p),g=x.firestore(),m=x.auth();m.setPersistence(f.a.auth.Auth.Persistence.LOCAL);var w=x.functions("us-central1"),k=[],y=Object(c.createContext)(null),C=Object(c.createContext)(void 0);function S(e){var t=Object(c.useState)(null),n=Object(h.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)(void 0),a=Object(h.a)(o,2),s=a[0],l=a[1];return Object(c.useEffect)((function(){m.onAuthStateChanged((function(e){if(e){var t=g.collection("customers").doc(e.uid).collection("subscriptions").onSnapshot((function(e){e.forEach((function(e){e.data().product.get(O.subscription_product_key.basic)&&l({subscriptionLevel:"basic"})}))}));k.push(t)}else l(void 0);i(e)}))}),[]),Object(v.jsx)(y.Provider,{value:r,children:Object(v.jsx)(C.Provider,{value:s,children:e.children})})}function I(){return Object(c.useContext)(y)}function A(){for(var e=0;e<k.length;e++){(0,k[e])()}k=[]}function _(e){return P.apply(this,arguments)}function P(){return(P=Object(b.a)(d.a.mark((function e(t){var n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.httpsCallable("ext-firestore-stripe-subscriptions-createPortalLink"),e.next=3,n({returnUrl:window.location.origin});case 3:return c=e.sent,r=c.data,window.location.assign(r.url),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.a.auth.EmailAuthProvider.PROVIDER_ID;var W=n(50),E=n(147),L=n(148),D=n(144),J=n(72),N=n.n(J),F=n(73),R=n.n(F);function T(){var e=I(),t=g,n=Object(W.useStripe)(),r=w,i=Object(c.useContext)(C),o=Object(c.useState)(null===e||void 0===e?void 0:e.displayName),a=Object(h.a)(o,2),s=a[0],l=a[1],u=Object(c.useState)(!1),j=Object(h.a)(u,2),f=j[0],p=j[1],x=Object(c.useState)(!1),k=Object(h.a)(x,2),y=k[0],S=k[1];var P=function(){var c=Object(b.a)(d.a.mark((function c(){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!e){c.next=6;break}return S(!0),c.next=4,t.collection("customers").doc(e.uid).collection("checkout_sessions").add({price:O.subscription_prices_keys.basic,success_url:window.location.origin,cancel_url:window.location.origin});case 4:c.sent.onSnapshot((function(e){var t=e.data();if(t){var c=t.error,r=t.sessionId;c&&alert("An error occured: "+c.message),r&&n&&(n.redirectToCheckout({sessionId:r}),S(!1))}}));case 6:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();function J(){return(J=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,_(r);case 3:return p(!1),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F="outlined";return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Account Information"}),Object(v.jsx)("div",{children:Object(v.jsx)(E.a,{variant:F,fullWidth:!0,label:"Email",value:null===e||void 0===e?void 0:e.email,disabled:!0})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)(E.a,{variant:F,fullWidth:!0,label:"Name",value:s,onChange:function(e){return l(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)(L.a,{variant:F,onClick:function(){},disabled:!0,children:"Save"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Subscriptions"}),Object(v.jsxs)("div",{children:[i?Object(v.jsx)(N.a,{style:{color:"green"}}):Object(v.jsx)(R.a,{style:{color:"red"}}),i?i.subscriptionLevel.toUpperCase():"NOT SUBSCRIBED"]}),Object(v.jsx)("br",{}),i?Object(v.jsxs)("div",{children:[Object(v.jsx)(L.a,{variant:F,onClick:function(){return J.apply(this,arguments)},children:"Manage Subscriptions"}),f?Object(v.jsx)(D.a,{}):Object(v.jsx)("div",{})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(L.a,{variant:F,onClick:P,children:"Subscribe"}),y?Object(v.jsx)(D.a,{}):Object(v.jsx)("div",{})]})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)(L.a,{variant:F,onClick:function(){A(),m.signOut()},children:"Logout"})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)(L.a,{variant:F,onClick:function(){e&&function(e){A(),e.delete().then((function(){return console.log("Successfully deleted account")})).catch((function(e){return console.error(e)}))}(e)},color:"secondary",children:"Delete Account"})})]})}var B=n(74),M=n.n(B);function U(){var e=Object(u.g)(),t=m,n=I(),c={signInFlow:"popup",signInOptions:[f.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},r=void 0;if(e&&e.location&&e.location.state){var i=e.location.state;i&&i.from&&i.from.pathname&&(r=i.from.pathname)}return n?r&&"/login"!==r?Object(v.jsx)(u.a,{to:r}):Object(v.jsx)(u.a,{to:"/"}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{style:{height:"20px"},children:"  "}),Object(v.jsx)("div",{id:"firebaseui-auth-container",children:Object(v.jsx)(M.a,{uiConfig:c,firebaseAuth:t})})]})}function G(){var e=I();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:["Welcome ",null===e||void 0===e?void 0:e.displayName," !"]})})}var H=n(76);function V(){return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"App Version"}),Object(v.jsx)("div",{children:H.version})]})})}var K=n(145),Q=n(146),q=n(77),Y=n.n(q),Z=n.p+"static/media/logo.e24ff742.svg";function z(e){return Object(v.jsx)(l.b,{to:"/",style:{color:"white"},children:Object(v.jsx)("img",{src:Z,alt:"HOME",height:"24px"})})}var X={color:"white",theme_color:"#ffd700",background_color:"#728a75"},$=Object(c.createContext)(X);function ee(){var e=Object(c.useContext)($);return Object(v.jsx)(K.a,{position:"static",style:{backgroundColor:e.background_color},children:Object(v.jsxs)(Q.a,{children:[Object(v.jsx)(z,{}),Object(v.jsx)("div",{style:{flexGrow:1}}),Object(v.jsx)(l.b,{to:"/account",style:{color:"white"},children:Object(v.jsx)(Y.a,{"aria-label":"account",color:"inherit"})})]})})}function te(){return Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(ee,{}),Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{path:"/login",children:Object(v.jsx)(U,{})}),Object(v.jsx)(u.b,{path:"/info",children:Object(v.jsx)(V,{})}),Object(v.jsx)(ne,{path:"/account",children:Object(v.jsx)(T,{})}),Object(v.jsx)(ne,{path:"/",children:Object(v.jsx)(G,{})}),Object(v.jsx)(ne,{path:"*",children:Object(v.jsx)(u.a,{to:"/"})})]})]})})}function ne(e){var t=e.children,n=Object(s.a)(e,["children"]),c=I();return Object(v.jsx)(u.b,Object(a.a)(Object(a.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(v.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))}var ce=n(78),re=Object(ce.a)(O.publishableKey);var ie=function(){return Object(v.jsx)(S,{children:Object(v.jsx)(W.Elements,{stripe:re,children:Object(v.jsx)(te,{})})})},oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))};o.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(ie,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");oe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ae(t,e)}))}}(),se()},38:function(e){e.exports=JSON.parse('{"subscription_prices_keys":{"basic":"price_1IRogLJgYHulMnJqhsDpckaT"},"subscription_product_key":{"basic":"prod_J3wZChslCkhQrI"},"publishableKey":"pk_live_51IRo7cJgYHulMnJqhlqht9joA1aDyACvpIeihyPWZKohmMbFCy74bFyrOvCNwLCf2clQJ0CAaiHVnmpalhctLIiR00n4hOXCTv"}')},70:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyBGWMEAFhrI37uH1NpQFZGVxF8LWuT2XA0","authDomain":"golf-gamblers.firebaseapp.com","projectId":"golf-gamblers","storageBucket":"golf-gamblers.appspot.com","messagingSenderId":"537485515557","appId":"1:537485515557:web:621eff503cd374fa3d58cc","measurementId":"G-DYSPGQCB9M"}')},76:function(e){e.exports=JSON.parse('{"version":"1.0.0"}')},90:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.1bd5584d.chunk.js.map
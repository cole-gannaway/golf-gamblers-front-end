(this["webpackJsonpgolf-gamblers-front-end"]=this["webpackJsonpgolf-gamblers-front-end"]||[]).push([[0],{100:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(11),o=n.n(r),s=(n(100),n(67)),a=n(4),l=n(27),j=n(16),d=n(36),u=n.n(d),b=n(51),h=n(22),O=n(164),p=n(8),x=(n(64),n(76),n(122),n(80)),f=n(3),v=p.a.apps.length?p.a.app():p.a.initializeApp(x),g=v.firestore(),m=v.auth();m.setPersistence(p.a.auth.Auth.Persistence.LOCAL);var w=v.functions("us-central1"),y=new Map,k=Object(c.createContext)(null),S=Object(c.createContext)(void 0);function _(e){var t=Object(c.useState)(null),n=Object(h.a)(t,2),i=n[0],r=n[1],o=Object(c.useState)(void 0),s=Object(h.a)(o,2),a=s[0],l=s[1];return Object(c.useEffect)((function(){m.onAuthStateChanged((function(e){e?function(e){var t=Object(O.a)();y.set(t,e)}(g.collection("users").doc(e.uid).collection("user_only").doc("account_data").onSnapshot((function(e){if(e.exists){var t=e.data();"basic"===(null===t||void 0===t?void 0:t.subscriptionState)&&l({subscriptionLevel:"basic"})}}))):l(void 0);r(e)}))}),[]),Object(f.jsx)(k.Provider,{value:i,children:Object(f.jsx)(S.Provider,{value:a,children:e.children})})}function C(){return Object(c.useContext)(k)}function A(){return Object(c.useContext)(S)}function I(){y.forEach((function(e){e()})),y.clear()}function W(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.httpsCallable("ext-firestore-stripe-subscriptions-createPortalLink"),e.next=3,t({returnUrl:window.location.origin});case 3:return n=e.sent,c=n.data,window.location.assign(c.url),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p.a.auth.EmailAuthProvider.PROVIDER_ID;var P=n(58),L=n(59),N=n(161),D=n(163),F=n(68),J=n.n(F),R=n(69),T=n.n(R),M=n(84),B=n.n(M),U=n(83),H=n.n(U),q=n(81),G=n(61);function V(){var e=C(),t=g,n=Object(P.useStripe)(),i=A(),r=Object(G.b)(),o=Object(c.useState)(null===e||void 0===e?void 0:e.displayName),s=Object(h.a)(o,2),a=s[0],j=s[1],d=q.version,O=Object(c.useState)(void 0),p=Object(h.a)(O,2),x=p[0],v=p[1],w=x===d;Object(c.useEffect)((function(){t.collection("public_data").doc("app_info").get().then((function(e){var t=e.data();v(null===t||void 0===t?void 0:t.version)}))}),[t]);var y=function(){var c=Object(b.a)(u.a.mark((function c(){return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!e){c.next=6;break}return r.enqueueSnackbar("Redirecting to Stripe...",{variant:"info"}),c.next=4,t.collection("customers").doc(e.uid).collection("checkout_sessions").add({price:L.subscription_prices_keys.basic,success_url:window.location.origin,cancel_url:window.location.origin});case 4:c.sent.onSnapshot((function(e){var t=e.data();if(t){var c=t.error,i=t.sessionId;c&&alert("An error occured: "+c.message),i&&n&&n.redirectToCheckout({sessionId:i})}}));case 6:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();function k(){return(k=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.enqueueSnackbar("Redirecting to Stripe...",{variant:"info"}),e.next=3,W();case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S="outlined";return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Account Information"}),Object(f.jsx)("div",{children:Object(f.jsx)(N.a,{variant:S,fullWidth:!0,label:"Email",value:null===e||void 0===e?void 0:e.email,disabled:!0})}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{children:Object(f.jsx)(N.a,{variant:S,fullWidth:!0,label:"Name",value:a,onChange:function(e){return j(e.target.value)}})}),Object(f.jsx)("br",{}),Object(f.jsx)(D.a,{variant:S,fullWidth:!0,startIcon:Object(f.jsx)(H.a,{}),onClick:function(){},disabled:!0,children:"Save"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Subscriptions"}),Object(f.jsxs)("div",{children:[(null===i||void 0===i?void 0:i.subscriptionLevel)?i.subscriptionLevel:"None",i?Object(f.jsx)(J.a,{style:{color:"green"}}):Object(f.jsx)(T.a,{style:{color:"red"}}),i?Object(f.jsx)("div",{children:Object(f.jsx)(D.a,{variant:S,fullWidth:!0,onClick:function(){return k.apply(this,arguments)},children:"Manage Subscriptions"})}):Object(f.jsx)("div",{children:Object(f.jsx)(D.a,{variant:S,fullWidth:!0,onClick:y,children:"Subscribe"})})]})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Version Info"}),Object(f.jsxs)("div",{children:["UI version: ",d]}),Object(f.jsxs)("div",{children:["Up to date: ",w?Object(f.jsx)(J.a,{style:{color:"green"}}):Object(f.jsxs)("div",{children:[Object(f.jsx)(T.a,{style:{color:"red"}}),Object(f.jsxs)("p",{children:["Your app is out of date. The current version is ",x,Object(f.jsx)("br",{}),"Follow the instructions ",Object(f.jsx)(l.b,{to:"/install",children:"here"})," if you need help reinstalling the app."]})]})]})]}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{children:Object(f.jsx)(D.a,{variant:S,fullWidth:!0,onClick:function(){I(),m.signOut()},children:"Logout"})}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{children:Object(f.jsx)(D.a,{variant:S,fullWidth:!0,startIcon:Object(f.jsx)(B.a,{}),onClick:function(){var t=window.confirm("Are you sure?");e&&t&&function(e){I(),e.delete().then((function(){return console.log("Successfully deleted account")})).catch((function(e){return console.error(e)}))}(e)},color:"secondary",children:"Delete Account"})})]})}var K=n(85),Q=n.n(K);function Y(){var e=Object(j.g)(),t=m,n=C(),c={signInFlow:"popup",signInOptions:[p.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},i=void 0;if(e&&e.location&&e.location.state){var r=e.location.state;r&&r.from&&r.from.pathname&&(i=r.from.pathname)}return n?i&&"/login"!==i?Object(f.jsx)(j.a,{to:i}):Object(f.jsx)(j.a,{to:"/"}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{style:{height:"20px"},children:"  "}),Object(f.jsx)("div",{id:"firebaseui-auth-container",children:Object(f.jsx)(Q.a,{uiConfig:c,firebaseAuth:t})})]})}function z(){var e=C(),t=A();return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["Welcome ",null===e||void 0===e?void 0:e.displayName," !"]}),Object(f.jsx)("div",{children:t?Object(f.jsx)("div",{}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:"Update your subscription to see this content"}),Object(f.jsx)("div",{children:Object(f.jsx)(l.b,{to:"/account",children:"Subscribe"})})]})})]})}var Z=n(157),X=n(158),$=n.p+"static/media/pwa_share_menu_ios.4ab46d8d.jpeg",ee=n.p+"static/media/pwa_installation_ios.021de36f.jpeg",te=n.p+"static/media/pwa_add_bookmark_ios.5f5b13b6.jpg",ne=n.p+"static/media/pwa_installed_ios.20234b25.jpeg";function ce(){return Object(f.jsx)("div",{style:{textAlign:"left"},children:Object(f.jsxs)(Z.a,{container:!0,spacing:3,children:[Object(f.jsx)(Z.a,{item:!0,xs:1}),Object(f.jsxs)(Z.a,{item:!0,xs:10,children:[Object(f.jsxs)("p",{children:["This application is a ",Object(f.jsx)("b",{children:"P"}),"rogressive ",Object(f.jsx)("b",{children:"W"}),"eb ",Object(f.jsx)("b",{children:"A"}),"pplication or ",Object(f.jsx)("b",{children:"PWA"})," for short.",Object(f.jsx)("br",{}),"Because of this, the aplication can be installed locally on phone or desktop computer.",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"Note: Updates occur regularly and the app may need to be reinstalled"]}),Object(f.jsx)(X.a,{}),Object(f.jsx)("h3",{children:"Install PWA on IOS"}),Object(f.jsx)("h5",{children:"1. Select the share icon at the bottom"}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:$,alt:"Error",width:"200px"})}),Object(f.jsx)("h5",{children:'2. Select "Add to Home Screen"'}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:te,alt:"Error",width:"200px"})}),Object(f.jsx)("h5",{children:'3. Select "Add"'}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:ee,alt:"Error",width:"200px"})}),Object(f.jsx)("h5",{children:"Done!"}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:ne,alt:"Error",width:"200px"})}),Object(f.jsx)("div",{})]}),Object(f.jsx)(Z.a,{item:!0,xs:1})]})})}var ie=n(159),re=n(160),oe=n(87),se=n.n(oe),ae=n.p+"static/media/logo.e24ff742.svg";function le(e){return Object(f.jsx)(l.b,{to:"/",style:{color:"white"},children:Object(f.jsx)("img",{src:ae,alt:"HOME",height:"24px"})})}var je={color:"white",theme_color:"#ffd700",background_color:"#728a75"},de=Object(c.createContext)(je);function ue(){var e=Object(c.useContext)(de);return Object(f.jsx)(ie.a,{position:"static",style:{backgroundColor:e.background_color},children:Object(f.jsxs)(re.a,{children:[Object(f.jsx)(le,{}),Object(f.jsx)("div",{style:{flexGrow:1}}),Object(f.jsx)(l.b,{to:"/account",style:{color:"white"},children:Object(f.jsx)(se.a,{"aria-label":"account",color:"inherit"})})]})})}function be(){return Object(f.jsx)("div",{style:{textAlign:"center"},children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(ue,{}),Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{path:"/login",children:Object(f.jsx)(Y,{})}),Object(f.jsx)(j.b,{path:"/install",children:Object(f.jsx)(ce,{})}),Object(f.jsx)(he,{path:"/account",children:Object(f.jsx)(V,{})}),Object(f.jsx)(he,{path:"/",children:Object(f.jsx)(z,{})}),Object(f.jsx)(he,{path:"*",children:Object(f.jsx)(j.a,{to:"/"})})]})]})})}function he(e){var t=e.children,n=Object(a.a)(e,["children"]),c=C();return Object(f.jsx)(j.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(f.jsx)(j.a,{to:{pathname:"/login",state:{from:n}}})}}))}var Oe=n(88),pe=Object(Oe.a)(L.publishableKey);var xe=function(){return Object(f.jsx)(_,{children:Object(f.jsx)(P.Elements,{stripe:pe,children:Object(f.jsx)(G.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(f.jsx)(be,{})})})})},fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,166)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),r(e),o(e)}))};o.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(xe,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");fe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ve(t,e)}))}}(),ge()},59:function(e){e.exports=JSON.parse('{"subscription_prices_keys":{"basic":"price_1IRogLJgYHulMnJqhsDpckaT"},"subscription_product_key":{"basic":"prod_J3wZChslCkhQrI"},"publishableKey":"pk_live_51IRo7cJgYHulMnJqhlqht9joA1aDyACvpIeihyPWZKohmMbFCy74bFyrOvCNwLCf2clQJ0CAaiHVnmpalhctLIiR00n4hOXCTv"}')},80:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyBGWMEAFhrI37uH1NpQFZGVxF8LWuT2XA0","authDomain":"golf-gamblers.firebaseapp.com","projectId":"golf-gamblers","storageBucket":"golf-gamblers.appspot.com","messagingSenderId":"537485515557","appId":"1:537485515557:web:621eff503cd374fa3d58cc","measurementId":"G-DYSPGQCB9M"}')},81:function(e){e.exports=JSON.parse('{"version":"BETA 1.0.1"}')}},[[121,1,2]]]);
//# sourceMappingURL=main.617b3e1d.chunk.js.map